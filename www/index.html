<!DOCTYPE HTML>
<html>
	<head>
		<title>ScribbleTask</title>
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, user-scalable = no, maximum-scale = 1.0">

		<link rel="stylesheet" type="text/css" href="ui/stylesheets/common.css"/>
		<script src="phonegap.js"></script>
		<script src="ui/scripts/app_lawnchair.js"></script>
		<script src="dataproviders/tasks.js"></script>
		<script src="dataproviders/project.js"></script>
		<script src="models/project.js"></script>
		<script src="models/task.js"></script>
		<script src="ui/scripts/raphael.js"></script>
		<script src="ui/scripts/serialize.js"></script>
		<script src="views/scribble.js"></script>
		<script src="controllers/addTask.js"></script>
		<script src="controllers/project.js"></script>
		<script src="application.js"></script>
		<script>
			var app = new Application();
			app.bind("ready", function() {
				var project;
				Project.data.find(function(projects) {
					var project;
					if (projects.length == 0) {
						project = new Project({ name: 'test' });
						project.save();
					} else {
						project = projects[0];
					}
					window.project = project;
					var projectController = new ProjectController("Project", project);
				});
			});
		</script>
	</head>
	<body>
		<div id="AddTask">
			<div class="wrapper">
				<div class="Paper">
					<button data-onClick="star">s</button>
					<input type="text"/>
					<div id="AddScribble"></div>
					<div class="buttons">
						<button data-onClick="add">Add</button>
						<button data-onClick="cancel">Cancel</button>
					</div>
				</div>
			</div>
		</div>
		<div id="Project" class="Project"></div>
		<script type="text/html" id="jstProjectView">
			<div class="Header">
				<div class="title">{!= project.name !}</div>
				<ul>
					<li><button data-onClick="clear">Clear</button></li>
					<li><button data-onClick="filterAll">All</button></li>
					<li><button data-onClick="filterStarred">Star</button></li>
					<li><button data-onClick="filterComplete">Completed</button></li>
					<li><button data-onClick="add">Add</button></li>
				</ul>
			</div>
			<div class="TaskList Paper">
				<ul class="Paper">
					{! for (var i = 0; i < tasks.length; i++) { var task = tasks[i]; !}
					<li data-index="{!= i !}">
						{!= template("jstTaskView", { i: i, task: task }) !}
					</li>
					{! } !}	
				</ul>
			</div>
		</script>
		<script type="text/html" id="jstTaskView">
			<input type="checkbox" data-onClick="complete" {!= (task.isComplete)?"checked":"" !}/>
			<button class="star" data-onClick="star">{!= (task.star)?"S":"s" !}</button>
			{! if (task.name) { !}
			<div class="name" data-onClick="task">
				{!= task.name !}
			</div>
			{! } else { !}
			<div id="Scribble_{!= i !}" data-onClick="task" class="scribble"></div>
			{! } !}
		</script>
	</body>
</html>
